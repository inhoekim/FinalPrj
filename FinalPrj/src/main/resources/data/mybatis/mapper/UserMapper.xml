<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="data.mybatis.mapper.UserMapper">
     <resultMap type="com.spring.ott.security.csh.FinalUserDetail" id="userDetail">
     	<id property="user_id" column="user_id"/>
     	<result property="pwd" column="pwd"/>
     	<result property="enabled" column="enabled"/>
     	<collection property="authList" ofType="com.spring.ott.vo.AuthoritiesVo">
     		<result property="user_id" column="user_id"/>
     		<result property="authority" column="authority"/>
     	</collection>
     </resultMap>
     
     <select id="getAuths" parameterType="String" resultMap="userDetail">
     	select * from users u,user_role r
     	where u.user_id=r.user_id and u.user_id=#{user_id}
     </select>
     <insert id="insertUser" parameterType="com.spring.ott.vo.UserVo">
     	insert into users values(#{user_id},#{pwd},#{name},#{jnum},#{age},#{area},#{email},sysdate,0)
     </insert>
     <insert id="insertAuth" parameterType="com.spring.ott.vo.AuthoritiesVo">
     	insert into user_role values(seq_role.nextval,#{user_id},'ROLE_MEMBER')
     </insert>
 </mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 