<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data.mybatis.mapper.VisiterMapper">

	<insert id="insert" parameterType="String">
		insert into visiter values(#{ip_address},sysdate)
	</insert>
	
	<select id="onedayselect" parameterType="String" resultType="com.spring.ott.vo.VisiterVo">
		select ip_address, count(ip_address) count, to_char(visit_date,'YYYY/MM/DD') visit_date2 from visiter
		group by to_char(visit_date,'YYYY/MM/DD'),ip_address
		having to_char(visit_date,'YYYY/MM/DD')=#{visit_date}
		order by count desc
	</select>
	
	<select id="rankingselect" parameterType="String" resultType="com.spring.ott.vo.VisiterVo">
		
		SELECT * FROM
		( SELECT ip_address, count(ip_address) count, to_char(visit_date,'YYYY/MM/DD') visit_date2 
		from visiter
		group by to_char(visit_date,'YYYY/MM/DD'),ip_address
		having to_char(visit_date,'YYYY/MM/DD')=#{visit_date}
		) 
		WHERE ROWNUM &lt; 6
		order by count desc
		
	</select>
	
	<select id="onedaylog" parameterType="String" resultType="int">
		select count(ip_address) count 
		from visiter 
		where to_char(visit_date,'YYYY/MM/DD')=#{visit_date}
	</select>
	
	
</mapper>